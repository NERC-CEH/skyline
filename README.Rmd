---
title: 'Data processing, analysis and uncertainty quantification for chamber measurements of CO$_2$, N$_2$O and CH$_4$ fluxes'
author: 
- Peter Levy
date: Centre for Ecology and Hydrology, Bush Estate, Penicuik, EH26 0QB, U.K.
output:
  html_document: 
    toc: no
    keep_md: yes
---


```{r, eval=FALSE, include = FALSE}
library(rmarkdown)
system.time(render("README.Rmd", output_file = "README.html"))
```

Analysis of skyline data

### Installation
The package can be installed directly from a bundled .tar.gz file or directly from GitHub, using `install_github` from remotes.

```{r, eval = FALSE}
# If not already installed:
# install.packages(c("remotes"))
library(remotes)  # for install_github

# install skyline from github
install_github("NERC-CEH/skyline")
```

And if it installs successfully:

```{r, eval = FALSE}
library(skyline)
# Check version installed
packageVersion("skyline")

# check the help:
?skyline
# currently the only properly documented function:
?read_cs_data
```

The code uses the workflow management package [targets](https://books.ropensci.org/targets/) 
to ensure reproducibility, and some understanding of that helps, but is not essential .
To run it for an experiment, you need to configure the settings in the 
`_targets.R` file and run the code in `run.R`.  This  looks like:

```{r, eval = FALSE}
here::i_am("./run.R")
library(targets)
tar_outdated()
system.time(tar_make())
```


### References
Some background on the uncertainty propagation is in here:

Levy, P.E., Gray, A., Leeson, S.R., Gaiawyn, J., Kelly, M.P.C., Cooper, M.D.A., Dinsmore, K.J., Jones, S.K., Sheppard, L.J., 2011. Quantification of uncertainty in trace gas fluxes measured by the static chamber method. European Journal of Soil Science 62, 811â€“821. https://doi.org/10.1111/j.1365-2389.2011.01403.x

